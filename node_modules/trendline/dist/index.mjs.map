{"version":3,"sources":["../src/index.ts"],"sourcesContent":["function getAverage(arr: Array<number>) {\n  const total = arr.reduce((acc, c) => acc + c, 0);\n  return total / arr.length;\n}\n\nfunction getSum(arr: Array<number>) {\n  return arr.reduce((acc, c) => acc + c, 0);\n}\n\nexport function createTrend(\n  data: Array<{ [key: string]: number }>,\n  xKey: string,\n  yKey: string\n): {\n  slope: number;\n  yStart: number;\n  calcY: (x: number) => number;\n} {\n  const xData = data.map((value) => value[xKey]);\n  const yData = data.map((value) => value[yKey]);\n\n  // average of X values and Y values\n  const xMean = getAverage(xData);\n  const yMean = getAverage(yData);\n\n  // Subtract X or Y mean from corresponding axis value\n  const xMinusxMean = xData.map((val) => val - xMean);\n  const yMinusyMean = yData.map((val) => val - yMean);\n\n  const xMinusxMeanSq = xMinusxMean.map((val) => Math.pow(val, 2));\n\n  const xy: Array<number> = [];\n  for (let x = 0; x < data.length; x++) {\n    xy.push(xMinusxMean[x] * yMinusyMean[x]);\n  }\n\n  // const xy = xMinusxMean.map((val, index) => val * yMinusyMean[index]);\n\n  const xySum = getSum(xy);\n\n  // b1 is the slope\n  const b1 = xySum / getSum(xMinusxMeanSq);\n  // b0 is the start of the slope on the Y axis\n  const b0 = yMean - b1 * xMean;\n\n  return {\n    slope: b1,\n    yStart: b0,\n    calcY: (x: number) => b0 + b1 * x,\n  };\n}\n\nexport default createTrend;\n"],"mappings":";AAAA,SAAS,WAAW,KAAoB;AACtC,QAAM,QAAQ,IAAI,OAAO,CAAC,KAAK,MAAM,MAAM,GAAG,CAAC;AAC/C,SAAO,QAAQ,IAAI;AACrB;AAEA,SAAS,OAAO,KAAoB;AAClC,SAAO,IAAI,OAAO,CAAC,KAAK,MAAM,MAAM,GAAG,CAAC;AAC1C;AAEO,SAAS,YACd,MACA,MACA,MAKA;AACA,QAAM,QAAQ,KAAK,IAAI,CAAC,UAAU,MAAM,IAAI,CAAC;AAC7C,QAAM,QAAQ,KAAK,IAAI,CAAC,UAAU,MAAM,IAAI,CAAC;AAG7C,QAAM,QAAQ,WAAW,KAAK;AAC9B,QAAM,QAAQ,WAAW,KAAK;AAG9B,QAAM,cAAc,MAAM,IAAI,CAAC,QAAQ,MAAM,KAAK;AAClD,QAAM,cAAc,MAAM,IAAI,CAAC,QAAQ,MAAM,KAAK;AAElD,QAAM,gBAAgB,YAAY,IAAI,CAAC,QAAQ,KAAK,IAAI,KAAK,CAAC,CAAC;AAE/D,QAAM,KAAoB,CAAC;AAC3B,WAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,OAAG,KAAK,YAAY,CAAC,IAAI,YAAY,CAAC,CAAC;AAAA,EACzC;AAIA,QAAM,QAAQ,OAAO,EAAE;AAGvB,QAAM,KAAK,QAAQ,OAAO,aAAa;AAEvC,QAAM,KAAK,QAAQ,KAAK;AAExB,SAAO;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO,CAAC,MAAc,KAAK,KAAK;AAAA,EAClC;AACF;AAEA,IAAO,cAAQ;","names":[]}